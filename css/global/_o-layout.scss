/*------------------------------------*\
    #LAYOUT
\*------------------------------------*/


/// Number of Layout Items per layout
$layout-items-per-row:        12;

/// Column Gutters, anything other than default builds out modifier classes.
$layout-items-gutters: (
    'default':  20px
);

/// Generate offset modifier classes for layout items.
$layout--offsets:          false;

/// Generate source ordering modifier classes for layout items.
$layout--push-and-pull:    false;





/**
 * Layout row
 *
 * [1] Additional modifier classes for layout gutters.
 */
.o-layout {
    @include clearfix;
    margin-right:  neg(half(map-get($layout-items-gutters, 'default')));
    margin-left:   neg(half(map-get($layout-items-gutters, 'default')));
}

// [1]
@each $layout-gutter, $layout-gutter-value in $layout-items-gutters {

    // Skip the default value.
    @if ($layout-gutter != 'default') {

        .o-layout--#{$layout-gutter} {
            margin-right:  neg(half($layout-gutter-value));
            margin-left:   neg(half($layout-gutter-value));
        }

    }

}


/**
 * A layout item, used like a column
 *
 * [1] Additional modifier classes for layout gutters.
 */
.o-layout__item {
    position: relative;
    width: 100%;
    float: left;
    min-height: 1px;
    padding-right:  half(map-get($layout-items-gutters, 'default'));
    padding-left:   half(map-get($layout-items-gutters, 'default'));

    // [1]
    @each $layout-gutter, $layout-gutter-value in $layout-items-gutters {

        // Skip the default value.
        @if ($layout-gutter != 'default') {

            .o-layout--#{$layout-gutter} > & {
                padding-right:  half($layout-gutter-value);
                padding-left:   half($layout-gutter-value);
            }

        }

    }

}


/**
 * Build The layout item span modifiers
 */
@for $layout-item-span from 1 through $layout-items-per-row {

    .o-layout__item--#{$layout-item-span} {
        width: (100% / $layout-items-per-row) * $layout-item-span;
    }

}


//
// Do the same as above but for each breakpoint
//
@each $breakpoint, $media-querie in $breakpoints {

    @include breakpoint($breakpoint) {

        @for $layout-item-span from 1 through $layout-items-per-row {

            .o-layout__item--#{$breakpoint}-#{$layout-item-span} {
                width: (100% / $layout-items-per-row) * $layout-item-span;
            }

        }

    }

}




// Conditionally output layout offsets.
@if $layout--offsets {

    /**
     * Offset modifiers for layout items.
     */
    @for $layout-item-span from 1 through $layout-items-per-row {

        .o-layout__item--offset-#{$layout-item-span} {
            margin-left: (100% / $layout-items-per-row) * $layout-item-span;
        }

    }

    //
    // Do the same as above but for each breakpoint
    //
    @each $breakpoint, $media-querie in $breakpoints {

        @include breakpoint($breakpoint) {

            @for $layout-item-span from 1 through $layout-items-per-row {

                .o-layout__item--offset-#{$breakpoint}-#{$layout-item-span} {
                    margin-left: (100% / $layout-items-per-row) * $layout-item-span;
                }

            }

        }

    }

}





// Conditionally output layout source ordering.
@if $layout--push-and-pull {

    /**
     * Push and Pull modifiers for layout items.
     */
    @for $layout-item-span from 1 through $layout-items-per-row {

        .o-layout__item--push-#{$layout-item-span} {
            left: (100% / $layout-items-per-row) * $layout-item-span;
        }

        .o-layout__item--pull-#{$layout-item-span} {
            left: negative((100% / $layout-items-per-row) * $layout-item-span);
        }

    }


    //
    // Do the same as above but for each breakpoint
    //
    @each $breakpoint, $media-querie in $breakpoints {

        @include breakpoint($breakpoint) {

            @for $layout-item-span from 1 through $layout-items-per-row {

                .o-layout__item--push-#{$breakpoint}-#{$layout-item-span} {
                    left: (100% / $layout-items-per-row) * $layout-item-span;
                }

                .o-layout__item--pull-#{$breakpoint}-#{$layout-item-span} {
                    left: negative((100% / $layout-items-per-row) * $layout-item-span);
                }

            }

        }

    }

}
